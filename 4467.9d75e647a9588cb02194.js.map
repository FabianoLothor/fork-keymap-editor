{"version":3,"file":"4467.9d75e647a9588cb02194.js","mappings":"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","sources":["webpack:///./src/Common/action-button.module.css?ed83","webpack:///./src/Common/ActionButton.js","webpack:///./src/Sources/Clipboard/store.js","webpack:///./src/Sources/Clipboard/KeymapRawInput.js","webpack:///./src/Sources/Clipboard/styles.module.css?ff1a","webpack:///./src/Sources/Clipboard/KeymapSourceDialog.js","webpack:///./src/Sources/Clipboard/ClipboardActions.js","webpack:///./src/Sources/Clipboard/Picker.js","webpack:///./src/Common/action-button.module.css","webpack:///./src/Sources/Clipboard/styles.module.css"],"sourcesContent":["\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./action-button.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./action-button.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import styles from './action-button.module.css'\n\nfunction ActionButton ({ children, secondary, className, ...props }) {\n  return (\n    <button\n      className={[\n        className,\n        styles.action,\n        secondary && styles.secondary\n      ].join(' ')}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n}\n\nActionButton.defaultProps = {\n  className: ''\n}\n\nexport default ActionButton\n","import { createContext, useMemo, useReducer } from 'react'\nimport { createSlice } from '@reduxjs/toolkit'\n\nconst STORAGE_KEY_KEYMAP = 'keymap_editor_clipboard_keymap_raw'\nconst STORAGE_KEY_KEYMAP_PARSED = 'keymap_editor_clipboard_keymap_parsed'\nconst STORAGE_KEY_METADATA = 'keymap_editor_clipboard_metadata_raw'\n\nconst INITIAL_KEYMAP = JSON.parse(localStorage.getItem(STORAGE_KEY_KEYMAP) || '\"\"')\nconst INITIAL_KEYMAP_PARSED = JSON.parse(localStorage.getItem(STORAGE_KEY_KEYMAP_PARSED || 'null'))\nconst INITIAL_METADATA = JSON.parse(localStorage.getItem(STORAGE_KEY_METADATA) || '\"\"')\n\nconst INITIAL_STATE = {\n  initializing: false,\n  keymapRaw: INITIAL_KEYMAP,\n  keymapParsed: INITIAL_KEYMAP_PARSED,\n  metadataRaw: INITIAL_METADATA,\n  metadataParsed: INITIAL_METADATA ? JSON.parse(INITIAL_METADATA) : null,\n  modalOpen: false,\n  pending: {\n    keymapRaw: INITIAL_KEYMAP,\n    keymapParsed: INITIAL_KEYMAP_PARSED,\n    metadataRaw: INITIAL_METADATA,\n    metadataParsed: INITIAL_METADATA ? JSON.parse(INITIAL_METADATA) : null\n  }\n}\n\nexport const pickerSlice = createSlice({\n  name: 'clipboard-picker',\n  initialState: INITIAL_STATE,\n  reducers: {\n    setKeymap (state, action) {\n      const { raw, parsed, pending = false } = action.payload\n\n      state.pending.keymapRaw = raw\n      state.pending.keymapParsed = parsed\n      if (!pending) {\n        state.keymapRaw = raw\n        state.keymapParsed = parsed\n      }\n    },\n    setMetadata (state, action) {\n      const { raw, parsed, pending = false } = action.payload\n      const target = pending ? state.pending : state\n      target.metadataRaw = raw\n      target.metadataParsed = parsed\n    },\n    confirmPending (state) {\n      state.keymapRaw = state.pending.keymapRaw\n      state.keymapParsed = state.pending.keymapParsed\n      state.metadataRaw = state.pending.metadataRaw\n      state.metadataParsed = state.pending.metadataParsed\n\n      localStorage.setItem(STORAGE_KEY_KEYMAP, JSON.stringify(state.keymapRaw))\n      localStorage.setItem(STORAGE_KEY_KEYMAP_PARSED, JSON.stringify(state.keymapParsed))\n      localStorage.setItem(STORAGE_KEY_METADATA, JSON.stringify(state.metadataRaw))\n    },\n    openModal (state) {\n      state.modalOpen = true\n    },\n    closeModal (state) {\n      state.modalOpen = false\n    }\n  }\n})\n\nfunction useActionDispatchers (dispatch) {\n  return useMemo(() => (\n    Object.keys(pickerSlice.actions).reduce((actions, action) => {\n      actions[action] = (...args) => dispatch(pickerSlice.actions[action](...args))\n      return actions\n    }, {})\n  ), [dispatch])\n}\n\nexport function usePickerStore () {\n  const [state, dispatch] = useReducer(pickerSlice.reducer, INITIAL_STATE)\n  const dispatchers = useActionDispatchers(dispatch)\n\n  return [state, dispatchers]\n}\n\nexport const ClipboardContext = createContext([{}, {}])\n\nexport function PickerStore ({ children }) {\n  const [state, dispatchers] = usePickerStore()\n\n  return (\n    <ClipboardContext.Provider value={[state, dispatchers]}>\n      {children}\n    </ClipboardContext.Provider>\n  )\n}\n\nexport function withPickerStore (Component) {\n  return props => (\n    <PickerStore>\n      <Component {...props} />\n    </PickerStore>\n  )\n}\n","import { useCallback, useEffect, useState } from 'react'\n\nimport extractKeymapData from 'keymap-editor-zmk-backend/lib/extract-keymap-data'\nimport { stripLegacyProperties } from '../../keymap'\n\nexport default function KeymapRaw ({ value, onChange, ...props }) {\n  const [{ raw }, setState] = useState({ raw: value, parsed: null })\n\n  useEffect(() => {\n    setState(state => ({ ...state, raw: value }))\n  }, [value, setState])\n\n  const handleChange = useCallback(event => {\n    const raw = event.target.value\n    setState(state => ({ ...state, raw }))\n  }, [setState])\n\n  useEffect(() => {\n    async function parse () {\n      // debounce? handle errors?\n      const parsed = await extractKeymapData(raw)\n      stripLegacyProperties(parsed)\n      setState(state => ({ ...state, parsed }))\n      onChange({ raw, parsed })\n    }\n\n    if (raw) {\n      parse()\n    }\n  }, [raw, setState, onChange])\n\n  return (\n    <textarea\n      onChange={handleChange}\n      value={raw}\n      {...props}\n    />\n  )\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./styles.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./styles.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { useCallback, useContext } from 'react'\n\nimport useToggle from '../../Common/hooks/use-toggle'\nimport Modal from '../../Common/Modal'\nimport DialogBox from '../../Common/DialogBox'\nimport ActionButton from '../../Common/ActionButton'\n\nimport { ClipboardContext } from './store'\nimport KeymapRaw from './KeymapRawInput'\nimport styles from './styles.module.css'\n\nexport default function KeymapSourceDialog ({ onSubmit, onCancel }) {\n  const [state, actions] = useContext(ClipboardContext)\n  const { pending } = state\n  const [metadataExpanded, toggleMetadataExpanded] = useToggle(!pending.metadataRaw)\n\n  const handleMetadataChange = useCallback(event => {\n    const raw = event.target.value\n    let parsed = null\n    let errors = null\n\n    try {\n      parsed = JSON.parse(raw)\n    } catch (err) {\n      errors = err\n    }\n\n    actions.setMetadata({ pending: true, raw, parsed, errors })\n  }, [actions])\n\n  const handleKeymapChange = useCallback(({ raw, parsed }) => {\n    actions.setKeymap({ pending: true, raw, parsed })\n  }, [actions])\n\n  const handleSubmit = useCallback(() => {\n    actions.confirmPending()\n    onSubmit({\n      keymap: pending.keymapParsed,\n      metadata: pending.metadataParsed\n    })\n  }, [actions, pending, onSubmit])\n\n  const disabled = (\n    !pending.metadataParsed ||\n    !pending.keymapParsed\n  )\n\n  return (\n    <Modal onDismiss={onCancel}>\n      <DialogBox style={{ maxWidth: '640px', maxHeight: '90vh', overflow: 'auto' }} dismissText={null}>\n        <article className={styles.source}>\n          <h2 onClick={toggleMetadataExpanded}>Keyboard Metadata{pending.metadataParsed && (\n            <>: <code>{pending.metadataParsed.name}</code></>\n          )}</h2>\n          <section className={styles.sourceContent} data-expanded={metadataExpanded}>\n            <p>\n              In order to understand what keyboard you're using and now to display\n              it visually, please paste the JSON source metadata file below.\n            </p>\n            {pending.metadataParsed && (\n              <p>Parsed metadata for: {pending.metadataParsed.name}</p>\n            )}\n            <textarea\n              cols={80}\n              rows={25}\n              wrap=\"off\"\n              spellCheck={false}\n              value={pending.metadataRaw}\n              onChange={handleMetadataChange}\n            />\n          </section>\n        </article>\n        <h2>Keymap Data</h2>\n        <p>Paste the devicetree source from your <code>.keymap</code> file below.</p>\n        <KeymapRaw\n          cols={80}\n          rows={25}\n          wrap=\"off\"\n          spellCheck={false}\n          value={pending.keymapRaw}\n          onChange={handleKeymapChange}\n        />\n        <p style={{ textAlign: 'center' }}>\n          <ActionButton disabled={disabled} onClick={handleSubmit}>Load</ActionButton>\n          <ActionButton onClick={onCancel} secondary>Close</ActionButton>\n        </p>\n      </DialogBox>\n    </Modal>\n  )\n}\n","import cloneDeep from 'lodash/cloneDeep'\nimport isEqual from 'lodash/isEqual'\nimport { useCallback, useContext, useMemo, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { ClipboardContext } from './store'\n\nimport applyKeymapChanges from 'keymap-editor-zmk-backend/lib/apply-keymap-changes'\nimport extractKeymapData from 'keymap-editor-zmk-backend/lib/extract-keymap-data'\n\nimport styles from './styles.module.css'\nimport { Button } from '../Controls'\nimport Icon from '../../Common/Icon'\nimport { stripLegacyProperties } from '../../keymap'\n\nconst keymapSelector = state => state.keyboard?.keymap\n\nexport default function ClipboardActions () {\n  const [updateNeeded, update] = useKeymapUpdater()\n  const props = { updateNeeded, update }\n\n  return (\n    <>\n      <ModalButton {...props} />\n      <CopyButton {...props} />\n    </>\n  )\n}\n\nexport function useKeymapUpdater () {\n  const appKeymapState = useSelector(keymapSelector)\n  const [state, actions] = useContext(ClipboardContext)\n\n  const updateNeeded = useMemo(() => (\n    appKeymapState &&\n    state.keymapParsed &&\n    !isEqual(appKeymapState, state.keymapParsed)\n  ), [appKeymapState, state.keymapParsed])\n\n  const update = useCallback(async function () {\n    // When opening the clipboard dialog and a previously parsed keymap differs\n    // from the app's current keymap state we're probably wanting to update the\n    // keymap source\n    const { layouts } = state.metadataParsed\n    const preferredLayout = appKeymapState.chosen['zmk,matrix_transform']\n      ? appKeymapState.chosen['zmk,matrix_transform'].replace(/^&/, '')\n      : null\n\n    const defaultLayout = Object.keys(layouts)[0]\n    const { layout } = (\n      layouts[preferredLayout] ||\n      layouts[defaultLayout]\n    )\n\n    const raw = await applyKeymapChanges(layout, cloneDeep(appKeymapState), state.keymapRaw)\n    const parsed = await extractKeymapData(raw)\n    stripLegacyProperties(parsed)\n\n    actions.setKeymap({ raw, parsed })\n    return raw\n  }, [appKeymapState, state, actions])\n\n  return [updateNeeded, update]\n}\n\nexport function ModalButton ({ updateNeeded, update }) {\n  const [state, { openModal }] = useContext(ClipboardContext)\n  const handleOpenModal = useCallback(async () => {\n    if (updateNeeded) {\n      await update()\n    }\n\n    openModal()\n  }, [openModal, update, updateNeeded])\n\n  return (\n    <Button onClick={handleOpenModal} title=\"View/update keymap code\">\n      Keymap\n    </Button>\n  )\n}\n\nexport function CopyButton ({ updateNeeded, update }) {\n  const title = updateNeeded ? 'Copy updated keymap' : 'No changes'\n  const [{ keymapParsed }] = useContext(ClipboardContext)\n  const [isCopiedVisible, showCopied] = useState(false)\n\n  const handleCopy = useCallback(async function () {\n    try {\n      const raw = await update()\n      await navigator.clipboard.writeText(raw)\n      showCopied(true)\n      setTimeout(() => showCopied(false), 1500)\n    } catch (err) {\n      console.error('Clipboard write failed')\n      console.log(err)\n    }\n  }, [update])\n\n  if (!keymapParsed) {\n    return null\n  }\n\n  return (\n    <Button\n      title={title}\n      disabled={!updateNeeded}\n      className={styles.copyButton}\n      onClick={handleCopy}\n      data-show-copied={isCopiedVisible}\n    >\n      <Icon name={updateNeeded ? 'clipboard-list' : 'clipboard-check'} />\n    </Button>\n  )\n}\n","import cloneDeep from 'lodash/cloneDeep'\nimport { useCallback, useContext, useEffect, useState } from 'react'\n\nimport { ClipboardContext, withPickerStore } from './store'\nimport KeymapSourceDialog from './KeymapSourceDialog'\nimport ClipboardActions from './ClipboardActions'\n\nexport function ClipboardPicker ({ onSelect, onError }) {\n  const [state, { closeModal }] = useContext(ClipboardContext)\n  const [initState, setInitState] = useState(null)\n  const handleSelectKeymap = useCallback(({ keymap, metadata }) => {\n    onSelect(cloneDeep({\n      source: 'clipboard',\n      keyboard: '',\n      layoutMetadata: metadata,\n      layout: Object.values(metadata.layouts)[0].layout,\n      keymap,\n      sensors: []\n    }))\n\n    closeModal()\n  }, [onSelect, closeModal])\n\n  useEffect(() => {\n    const { keymapParsed: keymap, metadataParsed: metadata } = state\n\n    if (initState || !(state.keymapParsed && state.metadataParsed)) {\n      return\n    }\n\n    onSelect(cloneDeep({\n      source: 'clipboard',\n      keyboard: '',\n      layoutMetadata: metadata,\n      layout: Object.values(metadata.layouts)[0].layout,\n      keymap,\n      sensors: []\n    }))\n  }, [initState, setInitState, onSelect, state])\n\n  return (\n    <>\n      <ClipboardActions />\n      {state.modalOpen && (\n        <KeymapSourceDialog\n          onSubmit={handleSelectKeymap}\n          onCancel={closeModal}\n        />\n      )}\n    </>\n  )\n}\n\nexport default withPickerStore(ClipboardPicker)\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"button.pi2Ig8c3Fdh4H2Jpxdo7 {\\n  display: inline-block;\\n  cursor: pointer;\\n  background-color: var(--hover-selection);\\n  color: white;\\n\\n  font-size: 16px;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 0 5px;\\n\\n  height: 30px;\\n  line-height: 30px;\\n  vertical-align: middle;\\n}\\n\\nbutton.Ctpu4E2dZYJ6g8CUGFOF {\\n  color: var(--fg);\\n  background-color: transparent;\\n}\\n\\nbutton.pi2Ig8c3Fdh4H2Jpxdo7[disabled] {\\n  filter: saturate(20%);\\n  opacity: .5;\\n  cursor: not-allowed;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/Common/action-button.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,qBAAqB;EACrB,eAAe;EACf,wCAAwC;EACxC,YAAY;;EAEZ,eAAe;EACf,YAAY;EACZ,kBAAkB;EAClB,cAAc;;EAEd,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,6BAA6B;AAC/B;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,mBAAmB;AACrB\",\"sourcesContent\":[\"button.action {\\n  display: inline-block;\\n  cursor: pointer;\\n  background-color: var(--hover-selection);\\n  color: white;\\n\\n  font-size: 16px;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 0 5px;\\n\\n  height: 30px;\\n  line-height: 30px;\\n  vertical-align: middle;\\n}\\n\\nbutton.secondary {\\n  color: var(--fg);\\n  background-color: transparent;\\n}\\n\\nbutton.action[disabled] {\\n  filter: saturate(20%);\\n  opacity: .5;\\n  cursor: not-allowed;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"action\": \"pi2Ig8c3Fdh4H2Jpxdo7\",\n\t\"secondary\": \"Ctpu4E2dZYJ6g8CUGFOF\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".fnnwBtqwiwSQgnuN5sqg h2 {\\n  cursor: pointer;\\n}\\n\\n.meN56P3rXkTYWdDY0oZq {\\n  height: auto;\\n  transition: height 100ms ease-out;\\n}\\n\\n.meN56P3rXkTYWdDY0oZq[data-expanded=\\\"false\\\"] {\\n  height: 0;\\n  overflow: hidden;\\n}\\n\\n.eVrbmh_w8MbnDUOfUD2N {\\n  position: relative;\\n}\\n.eVrbmh_w8MbnDUOfUD2N span {\\n  font-size: 120%;\\n  margin: auto 5px;\\n}\\n\\n.eVrbmh_w8MbnDUOfUD2N[data-show-copied=\\\"true\\\"]::after {\\n  content: \\\"Copied!\\\";\\n  position: absolute;\\n  right: -5px;\\n  top: 50%;\\n\\n  transform: translate(100%, -50%);\\n  background-color: var(--selection);\\n  color: white;\\n  padding: 10px;\\n  border-radius: 4px;\\n\\n  animation: normal 1.5s h0IIQBfKFzrLn6r9v5qG;\\n}\\n\\n@keyframes h0IIQBfKFzrLn6r9v5qG {\\n  0% { opacity: 0; width: 0; margin-left: -100%; }\\n  2.5% { opacity: 1; width: auto; }\\n  75% { opacity: 1; margin-left: 0; }\\n  100% { opacity: 0; }\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/Sources/Clipboard/styles.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,eAAe;AACjB;;AAEA;EACE,YAAY;EACZ,iCAAiC;AACnC;;AAEA;EACE,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;AACpB;AACA;EACE,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,kBAAkB;EAClB,WAAW;EACX,QAAQ;;EAER,gCAAgC;EAChC,kCAAkC;EAClC,YAAY;EACZ,aAAa;EACb,kBAAkB;;EAElB,2CAA+B;AACjC;;AAEA;EACE,KAAK,UAAU,EAAE,QAAQ,EAAE,kBAAkB,EAAE;EAC/C,OAAO,UAAU,EAAE,WAAW,EAAE;EAChC,MAAM,UAAU,EAAE,cAAc,EAAE;EAClC,OAAO,UAAU,EAAE;AACrB\",\"sourcesContent\":[\".source h2 {\\n  cursor: pointer;\\n}\\n\\n.sourceContent {\\n  height: auto;\\n  transition: height 100ms ease-out;\\n}\\n\\n.sourceContent[data-expanded=\\\"false\\\"] {\\n  height: 0;\\n  overflow: hidden;\\n}\\n\\n.copyButton {\\n  position: relative;\\n}\\n.copyButton span {\\n  font-size: 120%;\\n  margin: auto 5px;\\n}\\n\\n.copyButton[data-show-copied=\\\"true\\\"]::after {\\n  content: \\\"Copied!\\\";\\n  position: absolute;\\n  right: -5px;\\n  top: 50%;\\n\\n  transform: translate(100%, -50%);\\n  background-color: var(--selection);\\n  color: white;\\n  padding: 10px;\\n  border-radius: 4px;\\n\\n  animation: normal 1.5s popInOut;\\n}\\n\\n@keyframes popInOut {\\n  0% { opacity: 0; width: 0; margin-left: -100%; }\\n  2.5% { opacity: 1; width: auto; }\\n  75% { opacity: 1; margin-left: 0; }\\n  100% { opacity: 0; }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"source\": \"fnnwBtqwiwSQgnuN5sqg\",\n\t\"sourceContent\": \"meN56P3rXkTYWdDY0oZq\",\n\t\"copyButton\": \"eVrbmh_w8MbnDUOfUD2N\",\n\t\"popInOut\": \"h0IIQBfKFzrLn6r9v5qG\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","ActionButton","children","secondary","className","props","styles","join","defaultProps","STORAGE_KEY_KEYMAP","STORAGE_KEY_KEYMAP_PARSED","STORAGE_KEY_METADATA","INITIAL_KEYMAP","JSON","parse","localStorage","getItem","INITIAL_KEYMAP_PARSED","INITIAL_METADATA","INITIAL_STATE","initializing","keymapRaw","keymapParsed","metadataRaw","metadataParsed","modalOpen","pending","pickerSlice","createSlice","name","initialState","reducers","setKeymap","state","action","payload","raw","parsed","setMetadata","target","confirmPending","setItem","stringify","openModal","closeModal","ClipboardContext","createContext","PickerStore","dispatch","useReducer","reducer","dispatchers","useMemo","Object","keys","actions","reduce","usePickerStore","Provider","value","KeymapRaw","onChange","useState","setState","useEffect","handleChange","useCallback","event","extractKeymapData","stripLegacyProperties","KeymapSourceDialog","onSubmit","onCancel","useContext","useToggle","metadataExpanded","toggleMetadataExpanded","handleMetadataChange","errors","err","handleKeymapChange","handleSubmit","keymap","metadata","disabled","Modal","onDismiss","DialogBox","style","maxWidth","maxHeight","overflow","dismissText","onClick","cols","rows","wrap","spellCheck","textAlign","i","keymapSelector","keyboard","ClipboardActions","appKeymapState","useSelector","isEqual","layouts","preferredLayout","chosen","replace","defaultLayout","layout","applyKeymapChanges","cloneDeep","updateNeeded","update","ModalButton","CopyButton","handleOpenModal","title","isCopiedVisible","showCopied","handleCopy","navigator","clipboard","writeText","setTimeout","console","error","log","Icon","ClipboardPicker","onSelect","onError","initState","setInitState","handleSelectKeymap","source","layoutMetadata","values","sensors","Component","___CSS_LOADER_EXPORT___","push","module","id","locals"],"sourceRoot":""}