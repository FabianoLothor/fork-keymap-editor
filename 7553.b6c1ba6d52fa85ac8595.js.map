{"version":3,"file":"7553.b6c1ba6d52fa85ac8595.js","mappings":"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","sources":["webpack:///./src/Common/action-button.module.css?ed83","webpack:///./src/Common/ActionButton.js","webpack:///./src/Dialogs/LayoutGenerationError.js","webpack:///./src/Sources/Local/api.js","webpack:///./src/Sources/Local/LocalActions.js","webpack:///./src/Sources/Local/Picker.js","webpack:///./src/Common/action-button.module.css","webpack:///./node_modules/lodash/isEqual.js"],"sourcesContent":["\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./action-button.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./action-button.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import styles from './action-button.module.css'\n\nfunction ActionButton ({ children, secondary, className, ...props }) {\n  return (\n    <button\n      className={[\n        className,\n        styles.action,\n        secondary && styles.secondary\n      ].join(' ')}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n}\n\nActionButton.defaultProps = {\n  className: ''\n}\n\nexport default ActionButton\n","import PropTypes from 'prop-types'\n\nimport DialogBox from '../Common/DialogBox'\nimport Modal from '../Common/Modal'\nimport { GitHubIssuesLink } from './support'\n\nfunction LayoutGenerationError (props) {\n  const { onDismiss } = props\n\n  return (\n    <Modal>\n      <DialogBox onDismiss={onDismiss}>\n        <h2>Automatic Layout Generation Failed</h2>\n        <p>\n          No accompanying layout was found with your keymap file and the Keymap\n          Editor was unable to generate one automatically for you.\n        </p>\n        <p>\n          Something went wrong with the attempted automatic layout generation\n          for your keyboard and there's no automatic way to recover, but if you\n          want to reach out for assistance maybe we can work together to resolve\n          any technical issues or else craft a manual layout for your keyboard.\n        </p>\n        <p>\n          Share your experience at {GitHubIssuesLink}.\n        </p>\n      </DialogBox>\n    </Modal>\n  )\n}\n\nLayoutGenerationError.propTypes = {\n  onDismiss: PropTypes.func.isRequired\n}\n\nexport default LayoutGenerationError\n","import * as config from '../../config'\n\nexport async function loadAvailableKeyboards () {\n  const response = await fetch(`${config.apiBaseUrl}/v2/local/keyboards`)\n  return response.json()\n}\n\nexport async function loadKeyboardFiles (keyboard) {\n  const path = `v2/local/keyboards/${encodeURIComponent(keyboard)}`\n  const url = `${config.apiBaseUrl}/${path}`\n  const response = await fetch(url)\n\n  if (!response.ok) {\n    const err = new Error()\n    err.response = response\n    throw err\n  }\n  return response.json()\n}\n\nexport async function updateKeymap (keyboard, keymap) {\n  const path = `v2/local/keyboards/${encodeURIComponent(keyboard)}/keymap`\n  const url = `${config.apiBaseUrl}/${path}`\n\n  const response = await fetch(url, {\n    method: 'PUT',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(keymap)\n  })\n\n  return response.json()\n}\n","import isEqual from 'lodash/isEqual'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport * as api from './api'\nimport ActionButton from '../../Common/ActionButton'\n\nconst stateSelector = state => state\n\nexport default function LocalActions () {\n  const dispatch = useDispatch()\n  const state = useSelector(stateSelector)\n  const {\n    sourceOther,\n    keyboard,\n    _unmodifiedKeymap\n  } = state\n\n  const hasChanged = keyboard && !isEqual(keyboard.keymap, _unmodifiedKeymap)\n\n  async function handleCompile () {\n    const keyboard = sourceOther.keyboard\n    const { keymap } = state.keyboard\n\n    try {\n      const updated = await api.updateKeymap(keyboard, keymap)\n      dispatch({\n        type: 'KEYMAP_SAVE_SUCCESS',\n        keymap: updated\n      })\n    } catch {\n      dispatch({ type: 'KEYMAP_SAVE_FAILURE' })\n    }\n  }\n\n  return (\n    <ActionButton style={{ height: '38px' }} disabled={!hasChanged} onClick={handleCompile}>\n      Save Changes\n    </ActionButton>\n  )\n}\n","import find from 'lodash/find'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\n\nimport * as api from './api'\nimport LayoutGenerationError from '../../Dialogs/LayoutGenerationError'\nimport { Select } from '../Controls'\nimport LocalActions from './LocalActions'\n\nfunction LocalPicker ({ onSelect, onError }) {\n  const [keyboards, setKeyboards] = useState([])\n  const [keyboard, setKeyboard] = useState(null)\n\n  const choices = useMemo(() => (\n    keyboards.map(name => ({ id: name, name }))\n  ), [keyboards])\n\n  useEffect(() => {\n    (async function () {\n      const keyboards = await api.loadAvailableKeyboards()\n      const persistedKeyboard = JSON.parse(localStorage.getItem('localSourceSelectedKeyboard') || 'null')\n      const initialSelection = keyboards.includes(persistedKeyboard)\n        ? persistedKeyboard\n        : keyboards[0]\n\n      setKeyboards(keyboards)\n      setKeyboard(initialSelection)\n    })()\n  }, [setKeyboards, setKeyboard])\n\n  useEffect(() => {\n    (async function () {\n      if (keyboard) {\n        try {\n          const { info, keymap, sensors } = await api.loadKeyboardFiles(keyboard)\n          const { layouts } = info\n          const preferredLayout = keymap.chosen['zmk,matrix_transform']\n            ? keymap.chosen['zmk,matrix_transform'].replace(/^&/, '')\n            : null\n\n          const defaultLayout = Object.keys(layouts)[0]\n          const layoutMetadata = (\n            layouts[preferredLayout] ||\n            layouts[defaultLayout]\n          )\n\n          onSelect({\n            source: 'local',\n            keyboard,\n            layoutMetadata,\n            layout: layoutMetadata.layout,\n            keymap,\n            sensors\n          })\n        } catch (err) {\n          if (err.response) {\n            const error = await err.response.json()\n            if (error.name === 'LayoutGenerationError') {\n              onError({ dialog: LayoutGenerationError })\n              return\n            }\n          }\n\n          throw err\n        }\n      }\n    })()\n  }, [onSelect, onError, keyboard])\n\n  const handleSelectKeyboard = useCallback(({ id: keyboard }) => {\n    localStorage.setItem('localSourceSelectedKeyboard', JSON.stringify(keyboard))\n    setKeyboard(keyboard)\n  }, [setKeyboard])\n\n  const selection = find(choices, { id: keyboard })\n\n  return (\n    <>\n      <Select\n        label=\"Keyboard\"\n        value={selection}\n        options={choices}\n        onChange={handleSelectKeyboard}\n        getOptionValue={option => option.id}\n        getOptionLabel={option => option.name}\n      />\n      <LocalActions />\n    </>\n  )\n}\n\nexport default LocalPicker\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"button.pi2Ig8c3Fdh4H2Jpxdo7 {\\n  display: inline-block;\\n  cursor: pointer;\\n  background-color: var(--hover-selection);\\n  color: white;\\n\\n  font-size: 16px;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 0 5px;\\n\\n  height: 30px;\\n  line-height: 30px;\\n  vertical-align: middle;\\n}\\n\\nbutton.Ctpu4E2dZYJ6g8CUGFOF {\\n  color: var(--fg);\\n  background-color: transparent;\\n}\\n\\nbutton.pi2Ig8c3Fdh4H2Jpxdo7[disabled] {\\n  filter: saturate(20%);\\n  opacity: .5;\\n  cursor: not-allowed;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/Common/action-button.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,qBAAqB;EACrB,eAAe;EACf,wCAAwC;EACxC,YAAY;;EAEZ,eAAe;EACf,YAAY;EACZ,kBAAkB;EAClB,cAAc;;EAEd,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,6BAA6B;AAC/B;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,mBAAmB;AACrB\",\"sourcesContent\":[\"button.action {\\n  display: inline-block;\\n  cursor: pointer;\\n  background-color: var(--hover-selection);\\n  color: white;\\n\\n  font-size: 16px;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 0 5px;\\n\\n  height: 30px;\\n  line-height: 30px;\\n  vertical-align: middle;\\n}\\n\\nbutton.secondary {\\n  color: var(--fg);\\n  background-color: transparent;\\n}\\n\\nbutton.action[disabled] {\\n  filter: saturate(20%);\\n  opacity: .5;\\n  cursor: not-allowed;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"action\": \"pi2Ig8c3Fdh4H2Jpxdo7\",\n\t\"secondary\": \"Ctpu4E2dZYJ6g8CUGFOF\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","ActionButton","children","secondary","className","props","styles","join","defaultProps","LayoutGenerationError","onDismiss","GitHubIssuesLink","propTypes","PropTypes","loadAvailableKeyboards","fetch","config","response","json","loadKeyboardFiles","keyboard","path","encodeURIComponent","url","ok","err","Error","updateKeymap","keymap","method","headers","body","JSON","stringify","i","stateSelector","state","LocalActions","dispatch","useDispatch","useSelector","sourceOther","_unmodifiedKeymap","hasChanged","isEqual","api","updated","type","style","height","disabled","onClick","onSelect","onError","useState","keyboards","setKeyboards","setKeyboard","choices","useMemo","map","name","id","useEffect","persistedKeyboard","parse","localStorage","getItem","initialSelection","includes","info","sensors","layouts","preferredLayout","chosen","replace","defaultLayout","Object","keys","layoutMetadata","source","layout","dialog","handleSelectKeyboard","useCallback","setItem","selection","find","label","value","onChange","getOptionValue","option","getOptionLabel","___CSS_LOADER_EXPORT___","push","module","locals","baseIsEqual","exports","other"],"sourceRoot":""}